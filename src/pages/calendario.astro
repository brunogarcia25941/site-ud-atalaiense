---
import Layout from '../layouts/Layout.astro';
import ResultCard from '../components/ResultCard.astro';
import resultadosData from '../data/resultados.json';

interface Resultado {
  id: number;
  equipaCasa: string;
  equipaFora: string;
  golosCasa: number | null;
  golosFora: number | null;
  data: string;
  competicao: string;
  status: 'terminado' | 'agendado';
}

const resultados = (resultadosData as Resultado[]).sort((a, b) => 
  new Date(a.data).getTime() - new Date(b.data).getTime()
);

const proximosJogos = resultados.filter(r => r.status === 'agendado');
const resultadosPassados = resultados.filter(r => r.status === 'terminado').reverse();
---

<Layout title="Calendário de Jogos" description="Não percas nenhum jogo! Consulta o calendário completo das equipas da UD Atalaiense no Parque Desportivo Municipal de Atalaia.">
  <section class="max-w-4xl mx-auto px-4 py-12">
    <header class="mb-12">
      <h1 class="text-4xl md:text-6xl font-bold text-white mb-4 italic">Calendário <span class="text-orange-500">2025/26</span></h1>
      <p class="text-zinc-400">Consulta todos os jogos e resultados da nossa equipa sénior.</p>
    </header>

    {/* Próximos Jogos */}
    <div class="mb-16">
      <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
        <span class="w-2 h-2 bg-orange-500 rounded-full animate-pulse"></span>
        Próximos Jogos
      </h2>
      <div class="space-y-4">
        {proximosJogos.length > 0 ? (
          proximosJogos.map(jogo => <ResultCard {...jogo} />)
        ) : (
          <p class="text-zinc-500 italic py-4">Não existem jogos agendados de momento.</p>
        )}
      </div>
    </div>

    {/* Resultados Anteriores */}
    <div>
      <h2 class="text-2xl font-bold text-white mb-6">Resultados Anteriores</h2>
      <div class="space-y-4">
        {resultadosPassados.map(resultado => (
          <ResultCard {...resultado} />
        ))}
      </div>
    </div>
  </section>
</Layout>