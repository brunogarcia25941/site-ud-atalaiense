---
import Layout from '../../../layouts/Layout.astro';
import PlayerCard from '../../../components/PlayerCard.astro';
import jogadoresData from '../../../data/jogadores.json';

export async function getStaticPaths() {
  const epocas = [...new Set(jogadoresData
    .filter(j => j.escalao === 'Séniores')
    .map(j => j.epoca))];

  return epocas.map(epoca => ({
    params: { epoca },
    props: { 
      jogadores: jogadoresData.filter(j => j.escalao === 'Séniores' && j.epoca === epoca) 
    }
  }));
}

const { epoca } = Astro.params;
const { jogadores } = Astro.props;
const epocaTitulo = epoca ? epoca.replace('-', '/') : '';
---

<Layout title={`Séniores ${epocaTitulo}`}>
  <section class="max-w-7xl mx-auto px-4 py-12">
    <header class="mb-12 border-l-4 border-orange-500 pl-6">
      <h1 class="text-4xl font-black uppercase">Séniores</h1>
      <p class="text-zinc-400">{epocaTitulo}</p>
    </header>

    <div class="grid grid-cols-3 md:grid-cols-2 lg:grid-cols-5 gap-6">
      {jogadores.map((jogador) => (
        <PlayerCard 
          nome={jogador.nome} 
          posicao={jogador.posicao} 
          numero={jogador.numero}
          foto={jogador.foto}
        />
      ))}
    </div>

    <div class="mt-16">
      <a href="/seniores/arquivo" class="text-orange-500 hover:underline">← Voltar ao Arquivo de Épocas</a>
    </div>
  </section>
</Layout>