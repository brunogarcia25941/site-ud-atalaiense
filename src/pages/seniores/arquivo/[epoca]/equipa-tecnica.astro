---
import Layout from '../../../../layouts/Layout.astro';
import StaffCard from '../../../../components/StaffCard.astro';
// Assume que criaste este ficheiro JSON com os dados do staff
import staffData from '../../../../data/equipa_tecnica.json';

export async function getStaticPaths() {
  // Filtramos as épocas existentes nos dados da equipa técnica sénior
  const epocas = [...new Set(staffData
    .filter(s => s.escalao === 'Seniores')
    .map(s => s.epoca))];

  return epocas.map(epoca => ({
    params: { epoca },
    props: { 
      staff: staffData.filter(s => s.escalao === 'Seniores' && s.epoca === epoca) 
    }
  }));
}

const { epoca } = Astro.params;
const { staff } = Astro.props;
const epocaTitulo = epoca?.replace('-', '/');
---

<Layout title={`Equipa Técnica Seniores ${epocaTitulo}`}>
  <section class="max-w-7xl mx-auto px-4 py-12">
    <header class="mb-12 border-l-4 border-orange-500 pl-6">
      <h1 class="text-4xl font-black uppercase">Equipa Técnica</h1>
      <p class="text-zinc-400">Seniores | {epocaTitulo}</p>
    </header>
    <div class="mt-8 mb-8">
      <a href={`/seniores/arquivo/${epoca}`} class="text-orange-500 hover:underline">← Voltar a Seniores {" " + epoca}</a>
    </div>
    {staff.length > 0 ? (
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {staff.map((membro) => (
          <StaffCard 
            nome={membro.nome} 
            cargo={membro.cargo}
            foto={membro.foto}
          />
        ))}
      </div>
    ) : (
      <div class="bg-zinc-900 border border-zinc-800 p-12 rounded-2xl text-center">
        <p class="text-zinc-500 italic">Informação da equipa técnica ainda não disponível para esta época.</p>
      </div>
    )}

    
  </section>
</Layout>